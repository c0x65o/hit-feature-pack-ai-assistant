# Feature Pack: ai-core
# Global AI assistant overlay that can be mounted once at the shell level.

name: ai-core
title: AI
description: Global AI assistant overlay for HIT apps (shell-level)

# Admin-only nav entry for AI observability
nav:
  - id: ai
    label: AI
    icon: Sparkles
    group: system
    roles: [admin]
    showWhen: authenticated
    weight: 905
    children:
      - id: ai-traces
        label: Traces
        path: /admin/ai/traces
        icon: Activity
        weight: 100
        roles: [admin]
        showWhen: authenticated

# API routes provided by this pack (AI control plane).
# These are installed into the app as thin wrappers that re-export the server
# handlers from this package, keeping apps clean and feature packs portable.
api:
  routes:
    - path: /api/ai/chat
      methods: [POST]
      handler: "@hit/feature-pack-ai-core/server/api/chat"
      description: "Basic chat endpoint (TS-only)."
    - path: /api/ai/traces
      methods: [GET]
      handler: "@hit/feature-pack-ai-core/server/api/traces"
      description: "List recent AI chat traces (in-memory)."
    - path: /api/ai/traces/[id]
      methods: [GET]
      handler: "@hit/feature-pack-ai-core/server/api/traces-id"
      description: "Fetch a single AI chat trace by correlationId."

# ─────────────────────────────────────────────────────────────────────────────
# PERMISSIONS - Action definitions (for admin-core permissions UI + runtime checks)
# ─────────────────────────────────────────────────────────────────────────────
# Permissions are schema-driven and live under:
#   schema/permissions.yaml

config:
  schema:
    enabled:
      type: boolean
      default: true
      description: Enable the AI overlay
    model:
      type: string
      default: gpt-4o-mini
      description: Default model for chat
    hide_on_auth_pages:
      type: boolean
      default: true
      description: |
        Automatically hide the AI overlay on authentication pages like /login, 
        /signup, /register, /forgot-password, etc. Set to false to show the 
        overlay on all pages regardless of authentication state.
